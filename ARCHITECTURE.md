# ğŸï¸ RaceSafe DeFi - System Architecture

## ğŸ—ï¸ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ğŸï¸ RaceSafe DeFi System                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  â”‚         â”‚                  â”‚         â”‚                  â”‚
â”‚   PHASE I        â”‚         â”‚   PHASE II       â”‚         â”‚   USER           â”‚
â”‚   Smart Contract â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤   Detection      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤   Interface      â”‚
â”‚   Hardening      â”‚         â”‚   & Mitigation   â”‚         â”‚                  â”‚
â”‚                  â”‚         â”‚                  â”‚         â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                            â”‚                            â”‚
        â”‚                            â”‚                            â”‚
        â–¼                            â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SafeRouter   â”‚           â”‚ Mempool      â”‚           â”‚ F1 Dashboard â”‚
â”‚ Contract     â”‚           â”‚ Scanner      â”‚           â”‚ (Next.js)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagram

```
                        ETHEREUM NETWORK
                               â”‚
                               â”‚ WebSocket
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Backend (Node.js)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Mempool        â”‚â”€â”€â”€â–¶â”‚ Pattern        â”‚â”€â”€â”€â–¶â”‚ Risk      â”‚ â”‚
â”‚  â”‚ Scanner        â”‚    â”‚ Detector       â”‚    â”‚ Scorer    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                      â”‚                     â”‚      â”‚
â”‚         â”‚                      â”‚                     â”‚      â”‚
â”‚         â–¼                      â–¼                     â–¼      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚              WebSocket Event Emitter                   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ WebSocket
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Frontend (Next.js)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Race Feed  â”‚    â”‚ Pit Crew   â”‚    â”‚ Garage     â”‚        â”‚
â”‚  â”‚ (Live)     â”‚    â”‚ (Flagged)  â”‚    â”‚ (Status)   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                  â”‚            â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                             â”‚                               â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                      â”‚ Risk Gauge  â”‚                        â”‚
â”‚                      â”‚ (F1 Theme)  â”‚                        â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”’ Smart Contract Architecture

```
SafeRouter.sol
â”œâ”€â”€ Inheritance
â”‚   â”œâ”€â”€ ReentrancyGuard     (Prevents reentrancy attacks)
â”‚   â”œâ”€â”€ Pausable            (Emergency circuit breaker)
â”‚   â””â”€â”€ Ownable             (Access control)
â”‚
â”œâ”€â”€ State Variables
â”‚   â”œâ”€â”€ MAX_SLIPPAGE_BPS    (5% maximum)
â”‚   â”œâ”€â”€ minTradeAmount      (Dust prevention)
â”‚   â”œâ”€â”€ feeBps              (0.3% default)
â”‚   â”œâ”€â”€ feeRecipient        (Fee destination)
â”‚   â””â”€â”€ approvedRouters     (Whitelist mapping)
â”‚
â”œâ”€â”€ Core Functions
â”‚   â”œâ”€â”€ swapTokens()        
â”‚   â”‚   â”œâ”€â”€ Deadline check
â”‚   â”‚   â”œâ”€â”€ Amount validation
â”‚   â”‚   â”œâ”€â”€ Router approval check
â”‚   â”‚   â”œâ”€â”€ Fee calculation
â”‚   â”‚   â”œâ”€â”€ Token transfers (SafeERC20)
â”‚   â”‚   â”œâ”€â”€ Swap execution
â”‚   â”‚   â”œâ”€â”€ Slippage enforcement
â”‚   â”‚   â””â”€â”€ Event emission
â”‚   â”‚
â”‚   â””â”€â”€ swapETHForTokens()
â”‚       â””â”€â”€ (Similar flow for ETH swaps)
â”‚
â””â”€â”€ Admin Functions
    â”œâ”€â”€ setRouterApproval()
    â”œâ”€â”€ setFeeBps()
    â”œâ”€â”€ setFeeRecipient()
    â”œâ”€â”€ setMinTradeAmount()
    â”œâ”€â”€ pause() / unpause()
    â””â”€â”€ emergencyWithdraw()
```

---

## ğŸ” MEV Detection Algorithm

```
Mempool Transaction
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Is it targeting   â”‚ NO
â”‚ SafeRouter?       â”œâ”€â”€â”€â”€â–¶ Ignore
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ YES
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Store in recent   â”‚
â”‚ transactions      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pattern Analysis               â”‚
â”‚                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 1. Sandwich Detection      â”‚ â”‚
â”‚ â”‚    - Same sender?          â”‚ â”‚
â”‚ â”‚    - Bracketing txs?       â”‚ â”‚
â”‚ â”‚    - Higher gas?           â”‚ â”‚
â”‚ â”‚    â–¼ Risk Score: 70-95     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 2. Front-run Detection     â”‚ â”‚
â”‚ â”‚    - Similar target?       â”‚ â”‚
â”‚ â”‚    - Higher gas?           â”‚ â”‚
â”‚ â”‚    - Recent timing?        â”‚ â”‚
â”‚ â”‚    â–¼ Risk Score: 60-85     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 3. Gas Manipulation        â”‚ â”‚
â”‚ â”‚    - Gas > 3x average?     â”‚ â”‚
â”‚ â”‚    â–¼ Risk Score: 50-90     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Risk Score > 70?  â”‚ YES    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Flag & Alert â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ NO
         â–¼
   [Normal tx]
```

---

## âš¡ Flashbots Integration Flow

```
User Transaction
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Detect MEV Risk  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Risk > 70
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dashboard Alert:         â”‚
â”‚ "âš¡ SUBMIT VIA FLASHBOTS" â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ User clicks
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sign Transaction â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FlashbotsRelay           â”‚
â”‚  â”œâ”€ Create bundle        â”‚
â”‚  â”œâ”€ Sign with auth key   â”‚
â”‚  â”œâ”€ Submit to relay      â”‚
â”‚  â””â”€ Wait for inclusion   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Flashbots Relay  â”œâ”€â”€â”€â”€â–¶â”‚ Included in     â”‚
â”‚ (Private Mempool)â”‚     â”‚ next block      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ No public mempool exposure!
         â–¼
    âœ… MEV Protected
```

---

## ğŸ¨ Frontend Component Tree

```
App (_app.tsx)
â”‚
â”œâ”€â”€ Layout
â”‚   â”œâ”€â”€ Navigation Bar
â”‚   â”‚   â”œâ”€â”€ Logo
â”‚   â”‚   â”œâ”€â”€ Nav Items (Race Feed, Pit Crew, Garage, Simulation)
â”‚   â”‚   â””â”€â”€ Connect Wallet Button
â”‚   â”‚
â”‚   â”œâ”€â”€ Main Content [pages]
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ / (index.tsx) - Race Feed
â”‚   â”‚   â”‚   â”œâ”€â”€ RiskGauge (Speedometer)
â”‚   â”‚   â”‚   â”œâ”€â”€ StatsPanel (Telemetry)
â”‚   â”‚   â”‚   â””â”€â”€ RaceFeed (Live Transactions)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ /pit-crew (pit-crew.tsx)
â”‚   â”‚   â”‚   â””â”€â”€ Flagged Transaction Cards
â”‚   â”‚   â”‚       â”œâ”€â”€ Attack Type
â”‚   â”‚   â”‚       â”œâ”€â”€ Risk Score
â”‚   â”‚   â”‚       â”œâ”€â”€ Mitigation Info
â”‚   â”‚   â”‚       â””â”€â”€ Flashbots Button
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ /garage (garage.tsx)
â”‚   â”‚   â”‚   â”œâ”€â”€ Contract Info Panel
â”‚   â”‚   â”‚   â”œâ”€â”€ Security Features List
â”‚   â”‚   â”‚   â””â”€â”€ Audit Reports Comparison
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ /simulation (simulation.tsx)
â”‚   â”‚       â””â”€â”€ Attack Type Buttons
â”‚   â”‚           â”œâ”€â”€ Sandwich
â”‚   â”‚           â”œâ”€â”€ Front-run
â”‚   â”‚           â””â”€â”€ Gas Manipulation
â”‚   â”‚
â”‚   â””â”€â”€ Footer
â”‚
â””â”€â”€ WebSocket Hook (useWebSocket)
    â”œâ”€â”€ Connection Manager
    â”œâ”€â”€ Event Listeners
    â”‚   â”œâ”€â”€ transaction
    â”‚   â”œâ”€â”€ flagged
    â”‚   â””â”€â”€ stats
    â””â”€â”€ State Management
        â”œâ”€â”€ transactions[]
        â”œâ”€â”€ flaggedTxs[]
        â””â”€â”€ stats{}
```

---

## ğŸŒ API Endpoints

```
Backend Server (Express)
â”‚
â”œâ”€â”€ REST API (Port 8080)
â”‚   â”‚
â”‚   â”œâ”€â”€ GET /api/health
â”‚   â”‚   â””â”€â”€ Returns: Scanner status, WebSocket info
â”‚   â”‚
â”‚   â”œâ”€â”€ GET /api/mempool/live?limit=20
â”‚   â”‚   â””â”€â”€ Returns: Recent transactions
â”‚   â”‚
â”‚   â”œâ”€â”€ GET /api/flagged?limit=20&attackType=SANDWICH
â”‚   â”‚   â””â”€â”€ Returns: Flagged transactions
â”‚   â”‚
â”‚   â”œâ”€â”€ POST /api/sendPrivateTx
â”‚   â”‚   â”œâ”€â”€ Body: { signedTransaction, targetBlock }
â”‚   â”‚   â””â”€â”€ Returns: { hash, status }
â”‚   â”‚
â”‚   â”œâ”€â”€ POST /api/simulate
â”‚   â”‚   â”œâ”€â”€ Body: { signedTransactions[], blockTag }
â”‚   â”‚   â””â”€â”€ Returns: { simulation }
â”‚   â”‚
â”‚   â”œâ”€â”€ GET /api/stats
â”‚   â”‚   â””â”€â”€ Returns: Scanner & Flashbots stats
â”‚   â”‚
â”‚   â””â”€â”€ POST /api/demo/attack
â”‚       â”œâ”€â”€ Body: { attackType }
â”‚       â””â”€â”€ Returns: Generated attack tx
â”‚
â””â”€â”€ WebSocket (Port 8081)
    â”‚
    â”œâ”€â”€ Events (Server â†’ Client)
    â”‚   â”œâ”€â”€ init - Initial state
    â”‚   â”œâ”€â”€ transaction - New tx
    â”‚   â”œâ”€â”€ flagged - MEV attack
    â”‚   â””â”€â”€ stats - System stats
    â”‚
    â””â”€â”€ Connection Management
        â”œâ”€â”€ Auto-reconnect
        â””â”€â”€ Heartbeat
```

---

## ğŸ“¦ Deployment Architecture

```
Production Environment

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Ethereum Mainnet/Sepolia           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ SafeRouter   â”‚      â”‚ External DEXs   â”‚ â”‚
â”‚  â”‚ (Deployed)   â”‚â—„â”€â”€â”€â”€â–¶â”‚ (Uniswap, etc)  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ WebSocket
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend (Railway / Render)                 â”‚
â”‚  - Node.js server                           â”‚
â”‚  - WebSocket server                         â”‚
â”‚  - Flashbots integration                    â”‚
â”‚  - Environment: Production                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ HTTPS + WSS
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend (Vercel)                          â”‚
â”‚  - Next.js static site                      â”‚
â”‚  - CDN distribution                         â”‚
â”‚  - Auto-scaling                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
      ğŸ‘¥ Users
```

---

## ğŸ” Security Layers

```
Defense in Depth Strategy

Layer 1: Smart Contract
â”œâ”€â”€ âœ… ReentrancyGuard
â”œâ”€â”€ âœ… Input validation
â”œâ”€â”€ âœ… SafeERC20
â”œâ”€â”€ âœ… Access control
â””â”€â”€ âœ… Circuit breaker

Layer 2: Detection
â”œâ”€â”€ âœ… Real-time monitoring
â”œâ”€â”€ âœ… Pattern recognition
â”œâ”€â”€ âœ… Risk quantification
â””â”€â”€ âœ… Alert system

Layer 3: Mitigation
â”œâ”€â”€ âœ… Flashbots relay
â”œâ”€â”€ âœ… Private mempool
â”œâ”€â”€ âœ… Bundle submission
â””â”€â”€ âœ… Simulation

Layer 4: User Interface
â”œâ”€â”€ âœ… Visual warnings
â”œâ”€â”€ âœ… Risk indicators
â”œâ”€â”€ âœ… Mitigation actions
â””â”€â”€ âœ… Educational info
```

---

## ğŸ End-to-End User Flow

```
1. User connects to dashboard
        â”‚
        â–¼
2. WebSocket establishes connection
        â”‚
        â–¼
3. Scanner monitors mempool
        â”‚
        â–¼
4. User transaction submitted
        â”‚
        â–¼
5. Scanner detects MEV attack pattern
        â”‚
        â–¼
6. Risk score calculated (e.g., 85/100)
        â”‚
        â–¼
7. Alert sent via WebSocket
        â”‚
        â–¼
8. Dashboard displays:
   - ğŸš¨ Red alert
   - Risk gauge spikes
   - Flagged transaction card
   - Mitigation recommendation
        â”‚
        â–¼
9. User clicks "âš¡ SUBMIT VIA FLASHBOTS"
        â”‚
        â–¼
10. Transaction signed & sent to Flashbots
        â”‚
        â–¼
11. Flashbots includes in next block
        â”‚
        â–¼
12. âœ… Transaction executed safely
        â”‚
        â–¼
13. Dashboard updates:
    - Transaction confirmed
    - Risk cleared
    - Success notification
```

---

**Built for F1 Hacks** ğŸï¸ğŸ’¨
